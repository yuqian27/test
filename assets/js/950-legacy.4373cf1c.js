(self["webpackChunkgamea"]=self["webpackChunkgamea"]||[]).push([[950],{4950:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return A}});var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"view-style",style:"background-image:url("+n(7346)+")"},[s("div",{staticClass:"a"},[s("table",{staticClass:"b"},[s("tbody",t._l(3,(function(e){return s("tr",{key:e},t._l(10,(function(a){return s("td",{key:a,staticClass:"c",style:"border-radius: 10px;"+(0==t.list[1==e?a-1:2==e?10+a-1:20+a-1]?"":"background-image:url("+n(1940)+"),url("+n(6523)+")"),attrs:{id:"back"+(1==e?a:2==e?10+a:20+a),"data-item":t.list[1==e?a-1:2==e?10+a-1:20+a-1]},on:{click:function(n){return t.showDeck(n,1==e?a:2==e?10+a:20+a)}}})})),0)})),0)])]),t.showBattle?s("battle-picture",{staticClass:"battle_picture"}):t._e()],1)},a=[];function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,s=new Array(e);n<e;n++)s[n]=t[n];return s}function i(t){if(Array.isArray(t))return r(t)}n(2526),n(1817),n(1539),n(2165),n(8783),n(3948),n(1038);function o(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}n(7042),n(8309),n(4916),n(7601);function c(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}n(1703);function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t){return i(t)||o(t)||c(t)||u()}var d=n(124),m=n(8534),f=(n(2472),n(8675),n(2990),n(8927),n(3105),n(5035),n(4345),n(7174),n(2846),n(4731),n(7209),n(6319),n(8867),n(7789),n(3739),n(9368),n(4483),n(2056),n(4141),n(678),n(7462),n(3824),n(5021),n(2974),n(5016),n(4747),n(1249),n(3123),n(9826),n(9653),n(2222),n(7999)),p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"curtainstyle",attrs:{id:"curtainstyle"}},[s("div",{staticClass:"attribute"}),s("div",{staticClass:"monster_blood_volume"},[s("div",{staticClass:"monster_blood_volume_1",attrs:{id:"monster_blood_volume_1"}}),s("div",{staticClass:"monster_blood_volume_2",attrs:{id:"monster_blood_volume_2"}}),s("div",{staticClass:"monster_blood_volume_3"},[t._v(t._s(t.monsterinfo.monster_name)+"·"+t._s(t.monsterinfo.hp)+"|"+t._s(t.monsterinfo.current_hp))]),s("i",{staticClass:"icon-HP1",staticStyle:{position:"absolute","z-index":"3","font-size":"80px",top:"-86%",width:"100%","text-align":"center",left:"calc(50% - 400px)",color:"#d7c1a0"}}),s("i",{staticClass:"icon-HPL",staticStyle:{position:"absolute","z-index":"3","font-size":"40px",height:"100%","line-height":"30px",left:"-3.5%",color:"#d7c1a0"}}),s("i",{staticClass:"icon-HPR",staticStyle:{position:"absolute","z-index":"3","font-size":"40px",height:"100%","line-height":"30px",right:"-3.5%",color:"#d7c1a0"}})]),s("div",{staticClass:"curtainstyle_1",style:"background-image:url("+n(2906)+"),url("+n(6335)+")",attrs:{id:"curtainstyle_1"}}),s("div",{staticClass:"monsterstatustyle"},t._l(t.monster_statuslist,(function(t,e){return s("div",{key:e,staticClass:"playerstatusitemtyle",style:"background-image:url("+t.image+")",attrs:{id:"monster_status"+e}})})),0),s("div",{staticClass:"playerstatustyle"},t._l(t.player_statuslist,(function(e,n){return s("div",{key:n,staticClass:"playerstatusitemtyle",style:"background-image:url("+e.image+")",attrs:{id:"player_status"+n},on:{mouseenter:function(n){return t.statusmouseenterevent(n,e)},mouseleave:function(n){return t.statusmouseleaveevent(n,e)}}})})),0),s("div",{staticClass:"curtainstyle_2",attrs:{id:"cartridge_clip"}}),s("div",{staticClass:"incardstyle",on:{click:t.incard}},[t._v("抽 牌")]),s("div",{staticClass:"outcardstyle",on:{click:t.outcard}},[t._v("出 牌")]),s("div",{staticClass:"messagestyle"},t._l(t.msglist,(function(e,n){return s("p",{key:n,staticClass:"msgitemstyle",domProps:{innerHTML:t._s(e)}})})),0),s("div",{staticClass:"player_hp"}),s("div",{staticClass:"player_mp"})])},h=[];function y(t,e){return{msg:'您对<span style="color:#c000ffd1;font-size:25px;font-family:Hywb"> '.concat(e,' </span>造成<span style="color:red"> ').concat(t.FDamageValue," </span>点").concat(t.FTitle,"伤害!"),value:t.FDamageValue}}var _={BasicsCard:y};function g(t,e){return v.apply(this,arguments)}function v(){return v=(0,m.Z)((0,d.Z)().mark((function t(e,n){var s,a;return(0,d.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=document.getElementsByClassName("curtainstyle_2")[0],a=document.getElementById(e.id),t.next=4,f.p8.to("#".concat(e.id),.2,{zIndex:44,left:s.offsetWidth/2-a.clientWidth/2,top:"-230%"});case 4:t.t0=e.FType,t.next="基础卡"===t.t0?7:9;break;case 7:return t.abrupt("return",_.BasicsCard(e,n));case 9:return t.abrupt("break",10);case 10:case"end":return t.stop()}}),t)}))),v.apply(this,arguments)}var b={judgment_start_current:g},x=n(4806),k=n.n(x),C=n(2514),w=n(6955),E={data:function(){return{monsterinfo:{monster_name:"羽蛇神",hp:1e6,current_hp:1e6},msglist:[],message:"",player_statuslist:[{titlecolor:"#C60000",name:"超新星爆炸",image:n(7540)},{titlecolor:"#6600C6",name:"玄冥星系",image:n(5966)},{titlecolor:"#3EA300",name:"万物天生",image:n(2027)}],monster_statuslist:[{titlecolor:"#C60000",name:"超新星爆炸",image:n(7540)},{titlecolor:"#6600C6",name:"玄冥星系",image:n(5966)},{titlecolor:"#3EA300",name:"万物天生",image:n(2027)}],start_end:!1,cardid:null}},watch:{player_statuslist:function(t,e){var n=this;t.forEach((function(t,e){n.$nextTick((function(){e>0&&(document.getElementById("player_status".concat(e)).style.left=60*e+"px")}))}))},msglist:function(t,e){this.$nextTick((function(){document.getElementsByClassName("messagestyle")[0].scrollTop=document.getElementsByClassName("messagestyle")[0].scrollHeight}))},"monsterinfo.current_hp":function(t,e){var n=this,s=document.getElementsByClassName("monster_blood_volume_1")[0],a=document.getElementsByClassName("monster_blood_volume_2")[0];a.style.width="".concat(t/this.monsterinfo.hp*100,"%"),setTimeout((function(){s.style.width="".concat(t/n.monsterinfo.hp*100,"%")}),200),this.$nextTick((function(){n.msglist.push(n.message)}))}},beforeMount:function(){this.init()},mounted:function(){var t=this;this.player_statuslist.forEach((function(e,n){t.$nextTick((function(){n>0&&(document.getElementById("player_status".concat(n)).style.left=60*n+"px")}))})),this.monster_statuslist.forEach((function(e,n){t.$nextTick((function(){n>0&&(document.getElementById("monster_status".concat(n)).style.top=60*n+"px")}))})),this.$nextTick((function(){f.p8.to("#curtainstyle_1",1,{transform:"scale(1,1)"}),f.p8.to(["#monster_blood_volume_1","#monster_blood_volume_2","#monster_blood_volume_5","#monster_blood_volume_6"],1,{width:"100%"})}))},methods:{init:function(){var t=this;w.ZP.create_card(0,[]).then(function(){var e=(0,m.Z)((0,d.Z)().mark((function e(n){return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!=n.length){e.next=4;break}t.init(),e.next=8;break;case 4:return e.next=6,n.forEach((function(t,e){document.getElementById("cartridge_clip").appendChild(t)}));case 6:t.updatecardmargin(n),t.$nextTick((function(){}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},outcard:function(){var t=this;if(1==this.$store.state.player.start_end)return!1;this.$store.dispatch("Start_End",!0),this.cardid=this.$store.state.player.cardid,b.judgment_start_current(this.cardid,this.monsterinfo.monster_name).then(function(){var e=(0,m.Z)((0,d.Z)().mark((function e(n){var s,a;return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.monsterinfo.current_hp-=n.value,t.message=n.msg,e.next=4,f.p8.to("#".concat(t.cardid.id),.2,{delay:.6,opacity:0,onComplete:function(){var e=document.getElementById(t.cardid.id);e.parentElement.removeChild(e),t.cardid=null,t.$store.dispatch("Cardid",{})}});case 4:for(s=[],a=0;a<document.getElementById("cartridge_clip").children.length;a++)s.push(document.getElementById("cartridge_clip").children[a]);t.updatecardmargin(s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},incard:function(){var t=this;w.ZP.create_card(1,[]).then(function(){var e=(0,m.Z)((0,d.Z)().mark((function e(n){var s,a;return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!=n.length){e.next=4;break}t.incard(),e.next=9;break;case 4:return e.next=6,n.forEach((function(t,e){document.getElementById("cartridge_clip").appendChild(t)}));case 6:for(s=[],a=0;a<document.getElementById("cartridge_clip").children.length;a++)s.push(document.getElementById("cartridge_clip").children[a]);t.updatecardmargin(s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},statusmouseenterevent:function(t,e){C.ZP.playerstatuinfo(document.getElementById("curtainstyle"),e)},statusmouseleaveevent:function(t,e){C.ZP.playerstatuinfo(document.getElementById("curtainstyle"),e)},updatecardmargin:function(t){var e=this;if(t.length<=7)t.forEach((function(t,n){e.$nextTick((function(){document.getElementById(t.id).style.left=140*n+"px"}))}));else{var n=document.getElementsByClassName("curtainstyle_2")[0].offsetWidth,s=8==t.length?0:(120*t.length-n)/(t.length-1);t.forEach((function(t,n){e.$nextTick((function(){document.getElementById(t.id).style.left=(120-s)*n+"px"}))}))}this.$store.dispatch("Start_End",!1)}}},B=E,Z=n(1001),I=(0,Z.Z)(B,p,h,!1,null,"718f8108",null),M=I.exports,T={components:{BattlePicture:M},name:"CombatMain",data:function(){return{list:[],audio:null,showBattle:!1,cardshow:!1,monsterMain:[]}},mounted:function(){this.getMonsterData(),document.documentElement.requestFullscreen()},methods:{routerEvent:function(t){this.$router.push({name:t})},init:function(){var t=this;return(0,m.Z)((0,d.Z)().mark((function e(){var n,s,a,r,i;return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=function(t){return new Promise((function(e,r){t<=10?1==Math.round(Math.random())?(a.push(n.monsterMain[s]),s++):a.push(0):t>10&&t<21?-1==a.indexOf(t-10)||1==Math.round(Math.random())?(a.push(n.monsterMain[s]),s++):a.push(0):t>20&&(-1==a.indexOf(t-10)?(a.push(n.monsterMain[s]),s++):-1!==a.indexOf(t-10)&&-1!==a.indexOf(t-20)?1==Math.round(Math.random())?(a.push(n.monsterMain[s]),s++):a.push(0):-1!==a.indexOf(t-10)&&-1==a.indexOf(t-20)&&(a.push(n.monsterMain[s]),s++)),e()}))},n=t,s=0,a=[],r=1;case 3:if(!(r<=30)){e.next=9;break}return e.next=6,i(r);case 6:r++,e.next=3;break;case 9:n.list=k().cloneDeep(a);case 10:case"end":return e.stop()}}),e)})))()},getMonsterData:function(t){var e=this;return(0,m.Z)((0,d.Z)().mark((function t(){var s,a,r;return(0,d.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=[],a=[],r=[],t.next=3,e.$axios.get("/GemEnum.xlsx",{responseType:"arraybuffer"}).then((function(t){var e=n(7092),i=new Uint8Array(t.data),o=e.read(i,{type:"array"}),c=o.Sheets,u=e.utils.sheet_to_json(c.Type_A),l=e.utils.sheet_to_json(c.Type_A_Skill),d=e.utils.sheet_to_json(c.Skill_Type);u.forEach((function(t,e){switch(t.skill=k().compact(t.skill_id.split(",")).map((function(t){return k().find(l,(function(e){return e.id==Number(t)}))})).map((function(t){return t.skillEffect=k().compact(t.skill_type.split(",")).map((function(t){return k().find(d,(function(e){return e.id==Number(t)}))}))})),t.life_level){case"普通怪物":s.push(t);break;case"精英怪物":a.push(t);break;case"领主怪物":r.push(t);break;default:break}}))}));case 3:e.monsterMain=k().shuffle([].concat(l(k().sampleSize(s,10)),l(k().sampleSize(a,10)),l(k().sampleSize(r,10)))),e.init();case 5:case"end":return t.stop()}}),t)})))()},showDeck:function(t,e){var n=this;0==this.cardshow&&(this.cardshow=!0,f.p8.to("#back".concat(e),.5,{backgroundPosition:"-200% 50%,50% 50%",onComplete:function(){n.showBattle=!0}}))}}},$=T,S=(0,Z.Z)($,s,a,!1,null,"5a9080be",null),A=S.exports},1038:function(t,e,n){var s=n(2109),a=n(8457),r=n(7072),i=!r((function(t){Array.from(t)}));s({target:"Array",stat:!0,forced:i},{from:a})},2906:function(t,e,n){"use strict";t.exports=n.p+"assets/img/2-ai.29c657f3.svg"},1940:function(t,e,n){"use strict";t.exports=n.p+"assets/img/card_7_a.573af639.webp"},6335:function(t,e,n){"use strict";t.exports=n.p+"assets/img/monster1.989ace07.png"},7540:function(t,e,n){"use strict";t.exports=n.p+"assets/img/status1.5dfc9214.png"},5966:function(t,e,n){"use strict";t.exports=n.p+"assets/img/status2.99c4e072.png"},2027:function(t,e,n){"use strict";t.exports=n.p+"assets/img/status3.ae7abf27.png"}}]);
//# sourceMappingURL=950-legacy.4373cf1c.js.map