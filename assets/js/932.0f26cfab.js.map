{"version":3,"file":"assets/js/932.0f26cfab.js","mappings":"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","sources":["webpack://gamea/./src/views/CombatSystem/CombatMain.vue?3a2d","webpack://gamea/./src/components/BattlePicture.vue?dc62","webpack://gamea/./src/api/cardeffect.js","webpack://gamea/./src/api/battle.js","webpack://gamea/src/components/BattlePicture.vue","webpack://gamea/./src/components/BattlePicture.vue?4503","webpack://gamea/./src/components/BattlePicture.vue","webpack://gamea/src/views/CombatSystem/CombatMain.vue","webpack://gamea/./src/views/CombatSystem/CombatMain.vue?d190","webpack://gamea/./src/views/CombatSystem/CombatMain.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"view-style\",style:((\"background-image:url(\" + (require('@/assets/image/main_back/home_image_2_a.png')) + \")\"))},[_c('div',{staticClass:\"a\"},[_c('table',{staticClass:\"b\"},[_c('tbody',_vm._l((3),function(item){return _c('tr',{key:item},_vm._l((10),function(itemt){return _c('td',{key:itemt,staticClass:\"c\",style:((\"border-radius: 10px;\" + (_vm.list[item==1?itemt-1:item==2?10+itemt-1:20+itemt-1]==0?'':'background-image:url('+require('@/assets/image/card/card_7_a.webp')+'),url('+require('@/assets/image/deck_back/deck_back_4_a.png')+')'))),attrs:{\"id\":(\"back\" + (item==1?itemt:item==2?10+itemt:20+itemt)),\"data-item\":_vm.list[item==1?itemt-1:item==2?10+itemt-1:20+itemt-1]},on:{\"click\":function($event){return _vm.showDeck($event,item==1?itemt:item==2?10+itemt:20+itemt)}}})}),0)}),0)])]),(_vm.showBattle)?_c('battle-picture',{staticClass:\"battle_picture\"}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"curtainstyle\",attrs:{\"id\":\"curtainstyle\"}},[_c('div',{staticClass:\"attribute\"}),_c('div',{staticClass:\"monster_blood_volume\"},[_c('div',{staticClass:\"monster_blood_volume_1\",attrs:{\"id\":\"monster_blood_volume_1\"}}),_c('div',{staticClass:\"monster_blood_volume_2\",attrs:{\"id\":\"monster_blood_volume_2\"}}),_c('div',{staticClass:\"monster_blood_volume_3\"},[_vm._v(_vm._s(_vm.monsterinfo.monster_name)+\"·\"+_vm._s(_vm.monsterinfo.hp)+\"|\"+_vm._s(_vm.monsterinfo.current_hp))]),_c('i',{staticClass:\"icon-HP1\",staticStyle:{\"position\":\"absolute\",\"z-index\":\"3\",\"font-size\":\"80px\",\"top\":\"-86%\",\"width\":\"100%\",\"text-align\":\"center\",\"left\":\"calc(50% - 400px)\",\"color\":\"#d7c1a0\"}}),_c('i',{staticClass:\"icon-HPL\",staticStyle:{\"position\":\"absolute\",\"z-index\":\"3\",\"font-size\":\"40px\",\"height\":\"100%\",\"line-height\":\"30px\",\"left\":\"-3.5%\",\"color\":\"#d7c1a0\"}}),_c('i',{staticClass:\"icon-HPR\",staticStyle:{\"position\":\"absolute\",\"z-index\":\"3\",\"font-size\":\"40px\",\"height\":\"100%\",\"line-height\":\"30px\",\"right\":\"-3.5%\",\"color\":\"#d7c1a0\"}})]),_c('div',{staticClass:\"curtainstyle_1\",style:((\"background-image:url(\" + (require('@/assets/svg/2-ai.svg')) + \"),url(\" + (require('@/assets/monster/monster1.png')) + \")\")),attrs:{\"id\":\"curtainstyle_1\"}}),_c('div',{staticClass:\"monsterstatustyle\"},_vm._l((_vm.monster_statuslist),function(item,index){return _c('div',{key:index,staticClass:\"playerstatusitemtyle\",style:((\"background-image:url(\" + (item.image) + \")\")),attrs:{\"id\":(\"monster_status\" + index)}})}),0),_c('div',{staticClass:\"playerstatustyle\"},_vm._l((_vm.player_statuslist),function(item,index){return _c('div',{key:index,staticClass:\"playerstatusitemtyle\",style:((\"background-image:url(\" + (item.image) + \")\")),attrs:{\"id\":(\"player_status\" + index)},on:{\"mouseenter\":function($event){return _vm.statusmouseenterevent($event,item)},\"mouseleave\":function($event){return _vm.statusmouseleaveevent($event,item)}}})}),0),_c('div',{staticClass:\"curtainstyle_2\",attrs:{\"id\":\"cartridge_clip\"}}),_c('div',{staticClass:\"incardstyle\",on:{\"click\":_vm.incard}},[_vm._v(\"抽 牌\")]),_c('div',{staticClass:\"outcardstyle\",on:{\"click\":_vm.outcard}},[_vm._v(\"出 牌\")]),_c('div',{staticClass:\"messagestyle\"},_vm._l((_vm.msglist),function(item,index){return _c('p',{key:index,staticClass:\"msgitemstyle\",domProps:{\"innerHTML\":_vm._s(item)}})}),0),_c('div',{staticClass:\"player_hp\"}),_c('div',{staticClass:\"player_mp\"})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// 基础卡效果\r\n/* \r\n基础卡只附带最基础的伤害值，初始不带有任何属性和附加状态，和玩家其他状态会有反应\r\nitem -- 手牌内容\r\nmonster_name -- 怪物名称\r\n */\r\nexport function BasicsCard(item,monster_name){\r\n    return {msg:`您对<span style=\"color:#c000ffd1;font-size:25px;font-family:Hywb\"> ${monster_name} </span>造成<span style=\"color:red\"> ${item.FDamageValue} </span>点${item.FTitle}伤害!`,value:item.FDamageValue}\r\n}\r\n\r\nexport default {\r\n    BasicsCard\r\n}","import * as TweenMax from 'gsap/all'\r\nimport cardeffect from './cardeffect'\r\n\r\n// 随机怪物卡生成\r\nexport async function Monster_Card_Generation(){\r\n    var l = []\r\n    for (let i = 1; i <= 30; i++) {\r\n        l.push(i)\r\n    }\r\n}\r\n\r\n//玩家开始出牌，对手牌进行判定\r\nexport async function judgment_start(id,obj,monster_name){\r\n    var container = document.getElementsByClassName(\"curtainstyle_2\")[0]\r\n    var card = document.getElementById(`card${id}`)\r\n    await TweenMax.gsap.to(`#card${id}`,0.2,{zIndex:44,left:(container.offsetWidth / 2 ) - (card.clientWidth / 2),top:\"-230%\",rotateY:\"360deg\"})\r\n    return card_effect_judgment(obj,monster_name)\r\n}\r\n\r\n//手牌效果判定\r\nexport function card_effect_judgment(obj,monster_name){\r\n    switch (obj.FType) {\r\n        case \"基础卡\":\r\n            return {msg:`您对<span style=\"color:#c000ffd1;font-size:25px;font-family:Hywb\"> ${monster_name} </span>造成<span style=\"color:red\"> ${obj.FDamageValue} </span>点${obj.FTitle}伤害!`,value:obj.FDamageValue}\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n}\r\n\r\n// 对当前打出的手牌进行效果判定\r\n/* \r\nid -- 手牌svg的id\r\nitem -- 手牌所携带的内容/效果\r\nmonster_name -- 怪物名称 \r\n*/\r\nexport async function judgment_start_current(item,monster_name){\r\n    var container = document.getElementsByClassName(\"curtainstyle_2\")[0]\r\n    var card = document.getElementById(item.id)\r\n    // await TweenMax.gsap.to(`#card${id}`,0.2,{zIndex:44,left:(container.offsetWidth / 2 ) - (card.clientWidth / 2),top:\"-230%\",rotateY:\"360deg\"})\r\n    await TweenMax.gsap.to(`#${item.id}`,0.2,{zIndex:44,left:(container.offsetWidth / 2 ) - (card.clientWidth / 2),top:\"-230%\"})\r\n    switch (item.FType) {\r\n        case \"基础卡\":\r\n            return cardeffect.BasicsCard(item,monster_name)\r\n            break;\r\n    \r\n        default:\r\n            break;\r\n    }\r\n}\r\n\r\nexport default {\r\n    judgment_start_current\r\n}","<template>\r\n    <div class=\"curtainstyle\" id=\"curtainstyle\">\r\n        <div class=\"attribute\"></div>\r\n        <div class=\"monster_blood_volume\">\r\n            <!-- HP -->\r\n            <div class=\"monster_blood_volume_1\" id=\"monster_blood_volume_1\"></div>\r\n            <div class=\"monster_blood_volume_2\" id=\"monster_blood_volume_2\"></div>\r\n            <div class=\"monster_blood_volume_3\">{{monsterinfo.monster_name}}·{{monsterinfo.hp}}|{{monsterinfo.current_hp}}</div>\r\n            <i class=\"icon-HP1\" style=\"position:absolute;z-index:3;font-size:80px;top:-86%;width:100%;text-align:center;left:calc(50% - 400px);color:#d7c1a0\"/>\r\n            <i class=\"icon-HPL\" style=\"position:absolute;z-index:3;font-size:40px;height:100%;line-height:30px;left:-3.5%;color:#d7c1a0\"/>\r\n            <i class=\"icon-HPR\" style=\"position:absolute;z-index:3;font-size:40px;height:100%;line-height:30px;right:-3.5%;color:#d7c1a0\"/>\r\n            <!-- MP -->\r\n            <!-- <div class=\"monster_blood_volume_4\">\r\n                <div class=\"monster_blood_volume_5\" id=\"monster_blood_volume_5\"></div>\r\n                <div class=\"monster_blood_volume_6\" id=\"monster_blood_volume_6\"></div>\r\n            </div> -->\r\n        </div>\r\n        <!-- 怪物 -->\r\n        <div class=\"curtainstyle_1\" id=\"curtainstyle_1\" :style=\"`background-image:url(${require('@/assets/svg/2-ai.svg')}),url(${require('@/assets/monster/monster1.png')})`\"></div>\r\n        <!-- 怪物状态栏 -->\r\n        <div class=\"monsterstatustyle\">\r\n            <div v-for=\"(item,index) in monster_statuslist\" :key=\"index\" class=\"playerstatusitemtyle\" :style=\"`background-image:url(${item.image})`\" :id=\"`monster_status${index}`\"></div>\r\n        </div>\r\n        <!-- 玩家状态栏 -->\r\n        <div class=\"playerstatustyle\">\r\n            <div v-for=\"(item,index) in player_statuslist\" :key=\"index\" class=\"playerstatusitemtyle\" :style=\"`background-image:url(${item.image})`\" :id=\"`player_status${index}`\" @mouseenter=\"statusmouseenterevent($event,item)\" @mouseleave=\"statusmouseleaveevent($event,item)\"></div>\r\n        </div>\r\n        <!-- 卡牌区 -->\r\n        <div class=\"curtainstyle_2\" id=\"cartridge_clip\">\r\n            <!-- <svg class=\"cardstyle\" v-for=\"(item,index) in num\" :id=\"item.id\" :style=\"`background-image:url(${require('@/assets/svg/4-ai.svg')});z-index:${index+1}`\" :key=\"index\" @mouseenter=\"cardmouseenterevent($event,item.id)\" @mouseleave=\"cardmouseleaveevent($event,item.id)\" @click=\"cardclickevent($event,item)\">\r\n                <image class=\"cardbackgroundstyle\" width=\"100%\" height=\"100%\" :xlink:href=\"`${item.FVerticalDrawing}`\"></image>\r\n                <def>\r\n                    <path id=\"pt1\" d=\"M5 18 L40 18\" fill=\"none\"/>\r\n                    <path v-if=\"titleShow\" id=\"pt2\" :d=\"`M${svg.width*0.06} ${svg.height*0.25} L${svg.width*0.94} ${svg.height*0.25}`\" fill=\"none\"/>\r\n                </def>\r\n                <foreignObject x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" class=\"fo1style\">\r\n                    <p class=\"cardeffectstyle\" v-html=\"item.FTextDescription\"/>\r\n                </foreignObject>\r\n                <image x=\"0\" y=\"0\" width=\"100%\" height=\"20%\" :xlink:href=\"item.FTopDecoration\"></image>\r\n                <line x1=\"5%\" y1=\"23%\" x2=\"5%\" y2=\"90%\" :stroke=\"item.FColor\" stroke-width=\"1\" />\r\n                <text>\r\n                    <textPath v-if=\"titleShow\" class=\"playing_order\" text-anchor=\"middle\" startOffset=\"50%\" fill=\"black\" xlink:href=\"#pt2\">{{item.FTitle}}</textPath>\r\n                </text>\r\n            </svg> -->\r\n        </div>\r\n        <!-- 抽牌按钮 -->\r\n        <div class=\"incardstyle\" @click=\"incard\">抽  牌</div>\r\n        <!-- 出牌按钮 -->\r\n        <div class=\"outcardstyle\" @click=\"outcard\">出  牌</div>\r\n        <!-- 消息提示 -->\r\n        <div class=\"messagestyle\">\r\n            <p v-for=\"(item,index) in msglist\" :key=\"index\" class=\"msgitemstyle\" v-html=\"item\"/>\r\n        </div>\r\n        <!-- 玩家状态 -->\r\n        <!-- <div class=\"playerstyle\">\r\n            <div class=\"playerhp\"></div>\r\n            <div class=\"playermp\"></div>\r\n        </div> -->\r\n        <div class=\"player_hp\"></div>\r\n        <div class=\"player_mp\"></div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport '@/assets/font/font.css'\r\nimport * as TweenMax from 'gsap/all'\r\nimport battle from '@/api/battle.js'\r\nimport _ from 'lodash'\r\nimport components from \"@/api/components.js\"\r\nimport common from \"@/api/common.js\"\r\n\r\nexport default {\r\n    data(){\r\n        return{\r\n            //怪物信息\r\n            monsterinfo:{\r\n                monster_name:\"羽蛇神\",//怪物名\r\n                hp:1000000,//血量\r\n                current_hp:1000000,//当前血量\r\n            },\r\n            msglist:[],//战斗记录\r\n            message:\"\",\r\n            player_statuslist:[ //玩家状态\r\n                {titlecolor:\"#C60000\",name:\"超新星爆炸\",image:require('@/assets/playerstatus/status1.png')},\r\n                {titlecolor:\"#6600C6\",name:\"玄冥星系\",image:require('@/assets/playerstatus/status2.png')},\r\n                {titlecolor:\"#3EA300\",name:\"万物天生\",image:require('@/assets/playerstatus/status3.png')},\r\n            ],\r\n            monster_statuslist:[ //怪物状态\r\n                {titlecolor:\"#C60000\",name:\"超新星爆炸\",image:require('@/assets/playerstatus/status1.png')},\r\n                {titlecolor:\"#6600C6\",name:\"玄冥星系\",image:require('@/assets/playerstatus/status2.png')},\r\n                {titlecolor:\"#3EA300\",name:\"万物天生\",image:require('@/assets/playerstatus/status3.png')},\r\n            ],\r\n            start_end:false,//开始对局 or 结束对局\r\n            cardid:null,//前一个选中的的卡牌id\r\n        }\r\n    },\r\n    watch:{\r\n        player_statuslist(nval,oval){\r\n            nval.forEach((item,index)=>{\r\n                this.$nextTick(()=>{\r\n                    if(index > 0){\r\n                        document.getElementById(`player_status${index}`).style.left = 60*index+'px'\r\n                    }\r\n                })\r\n            })\r\n        },\r\n        msglist(nval,oval){\r\n            this.$nextTick(()=>{\r\n                document.getElementsByClassName('messagestyle')[0].scrollTop = document.getElementsByClassName('messagestyle')[0].scrollHeight\r\n            })\r\n        },\r\n        \"monsterinfo.current_hp\"(nval,oval){\r\n            var current_hp1 = document.getElementsByClassName(\"monster_blood_volume_1\")[0]\r\n            var current_hp2 = document.getElementsByClassName(\"monster_blood_volume_2\")[0]\r\n            current_hp2.style.width = `${(nval / this.monsterinfo.hp) * 100}%`\r\n            setTimeout(() => {\r\n                current_hp1.style.width = `${(nval / this.monsterinfo.hp) * 100}%`\r\n            }, 200);\r\n            this.$nextTick(()=>{\r\n                this.msglist.push(this.message)\r\n            })\r\n        },\r\n    },\r\n    beforeMount(){\r\n        this.init()\r\n    },\r\n    mounted(){\r\n        this.player_statuslist.forEach((item,index)=>{\r\n            this.$nextTick(()=>{\r\n                if(index > 0){\r\n                    document.getElementById(`player_status${index}`).style.left = 60*index+'px'\r\n                }\r\n            })//7,43\r\n        })\r\n        this.monster_statuslist.forEach((item,index)=>{\r\n            this.$nextTick(()=>{\r\n                if(index > 0){\r\n                    document.getElementById(`monster_status${index}`).style.top = 60*index+'px'\r\n                }\r\n            })//7,43\r\n        })\r\n        this.$nextTick(()=>{\r\n            TweenMax.gsap.to(\"#curtainstyle_1\",1,{transform:\"scale(1,1)\"})\r\n            TweenMax.gsap.to([\"#monster_blood_volume_1\",\"#monster_blood_volume_2\",\"#monster_blood_volume_5\",\"#monster_blood_volume_6\"],1,{width:\"100%\"})\r\n        })\r\n        // this.init()\r\n    },\r\n    methods:{\r\n        init(){\r\n            common.create_card(0,[]).then(async (res)=>{\r\n                if(res.length == 0){\r\n                    this.init()\r\n                }else{\r\n                    await res.forEach((item,index)=>{\r\n                        document.getElementById(\"cartridge_clip\").appendChild(item)\r\n                    })\r\n                    this.updatecardmargin(res)\r\n                    this.$nextTick(()=>{\r\n                        // this.getcardstyle(res[0].id)\r\n                    })\r\n                }\r\n            })\r\n        },\r\n        // 出牌\r\n        outcard(){\r\n            if(this.$store.state.player.start_end == true){\r\n                return false\r\n            }\r\n            this.$store.dispatch(\"Start_End\",true)\r\n            this.cardid = this.$store.state.player.cardid\r\n            battle.judgment_start_current(this.cardid,this.monsterinfo.monster_name).then(async (obj)=>{\r\n                this.monsterinfo.current_hp -= obj.value\r\n                this.message = obj.msg\r\n                await TweenMax.gsap.to(`#${this.cardid.id}`,0.2,{delay:0.6,opacity:0,onComplete:()=>{\r\n                    var card = document.getElementById(this.cardid.id)\r\n                    card.parentElement.removeChild(card)\r\n                    this.cardid = null\r\n                    this.$store.dispatch(\"Cardid\",{})\r\n                }})\r\n                var list = []\r\n                for (let i = 0; i < document.getElementById(\"cartridge_clip\").children.length; i++) {\r\n                    list.push(document.getElementById(\"cartridge_clip\").children[i])\r\n                }\r\n                this.updatecardmargin(list)\r\n            })\r\n        },\r\n        // 抽牌\r\n        incard(){\r\n            common.create_card(1,[]).then(async (res)=>{\r\n                if(res.length == 0){\r\n                    this.incard()\r\n                }else{\r\n                    await res.forEach((item,index)=>{\r\n                        document.getElementById(\"cartridge_clip\").appendChild(item)\r\n                    })\r\n                    var list = []\r\n                    for (let i = 0; i < document.getElementById(\"cartridge_clip\").children.length; i++) {\r\n                        list.push(document.getElementById(\"cartridge_clip\").children[i])\r\n                    }\r\n                    this.updatecardmargin(list)\r\n                    // this.$nextTick(()=>{\r\n                    //     this.getcardstyle()\r\n                    // })\r\n                }\r\n            })\r\n        },\r\n        statusmouseenterevent(e,item){ //鼠标移入状态事件\r\n            components.playerstatuinfo(document.getElementById(\"curtainstyle\"),item)\r\n        },\r\n        statusmouseleaveevent(e,item){ //鼠标移出状态事件\r\n            components.playerstatuinfo(document.getElementById(\"curtainstyle\"),item)\r\n        },\r\n        //牌组间距更新\r\n        updatecardmargin(nval){\r\n            if(nval.length <= 7){\r\n                nval.forEach((item,index)=>{\r\n                    this.$nextTick(()=>{\r\n                        document.getElementById(item.id).style.left = 140*index+'px'\r\n                        // console.log(TweenMax.gsap.getTweensOf(`#card${index}`));\r\n                        // TweenMax.gsap.to(`#card${index}`,0,{opacity:1,top:'10px'})\r\n                    })//7,43\r\n                })\r\n            }else{\r\n                var divwidth = document.getElementsByClassName('curtainstyle_2')[0].offsetWidth\r\n                var superimposed_value = nval.length == 8 ? 0 : ((120 * nval.length) - divwidth) / (nval.length - 1)\r\n                nval.forEach((item,index)=>{\r\n                    this.$nextTick(()=>{\r\n                        // if(index > 0){\r\n                            document.getElementById(item.id).style.left = (120-superimposed_value)*index+'px'\r\n                        // }\r\n                    })\r\n                })\r\n            }\r\n            this.$store.dispatch(\"Start_End\",false)\r\n        },\r\n        //获取svg卡牌style\r\n        // getcardstyle(id){\r\n        //     this.svg.width = document.getElementById(id).getBBox().width;\r\n        //     this.svg.height = document.getElementById(id).getBBox().height;\r\n        //     this.$nextTick(()=>{\r\n        //         this.titleShow = true\r\n        //     })\r\n        // }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.curtainstyle{\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: rgba(0, 0, 0, 0.8);\r\n}\r\n.curtainstyle_1{\r\n    position: absolute;\r\n    width: 522px;\r\n    height: 689px;\r\n    border-radius: 20px;\r\n    background-size: cover;\r\n    background-position: 50% 50%;\r\n    background-repeat: no-repeat;\r\n    left: calc(50% - 261px);\r\n    top: 8%;\r\n    border: 2px solid beige;\r\n    transform: scale(0,0);\r\n}\r\n.curtainstyle_2{\r\n    position: absolute;\r\n    width: 50%;\r\n    height: 200px;\r\n    // border-top: 2px solid rgba(245, 245, 245, 0.5);\r\n    // border-bottom: 2px solid rgba(245, 245, 245, 0.5);\r\n    bottom: 1%;\r\n    left: 25%;\r\n}\r\n.monster_blood_volume{\r\n    position: absolute;\r\n    border: 1px solid #c4d1df;\r\n    width: 800px;\r\n    height: 30px;\r\n    border-radius: 7px;\r\n    left: calc(50% - 400px);\r\n    top: 30px;\r\n    .monster_blood_volume_1{\r\n        position: absolute;\r\n        width: 0%;\r\n        height: 100%;\r\n        border-radius: 7px;\r\n        background-color: rgba(102, 255, 242, 0.5);\r\n        z-index: 1;\r\n        transition: 0.2s;\r\n    }\r\n    .monster_blood_volume_2{\r\n        position: absolute;\r\n        width: 0%;\r\n        height: 100%;\r\n        border-radius: 7px;\r\n        background-color: rgba(255, 0, 0, 0.5);\r\n        z-index: 2;\r\n        transition: 0.2s;\r\n    }\r\n    .monster_blood_volume_3{\r\n        position: absolute;\r\n        width: 100%;\r\n        height: 100%;\r\n        color: beige;\r\n        font-family: Hywb;\r\n        text-align: center;\r\n        font-size: 25px;\r\n        line-height: 30px;\r\n        z-index: 3;\r\n    }\r\n    .monster_blood_volume_4{\r\n        position: absolute;\r\n        width: 90%;\r\n        height: 20%;\r\n        border: 1px solid #c4d1df;\r\n        border-radius: 5px;\r\n        bottom: -9px;\r\n        left: 5%;\r\n        .monster_blood_volume_5{\r\n            position: absolute;\r\n            width: 0%;\r\n            height: 100%;\r\n            border-radius: 5px;\r\n            background-color: rgba(0, 255, 255, 0.2);\r\n            z-index: 1;\r\n        }\r\n        .monster_blood_volume_6{\r\n            position: absolute;\r\n            width: 0%;\r\n            height: 100%;\r\n            border-radius: 5px;\r\n            background-color: rgba(0, 255, 255, 0.8);\r\n            z-index: 2;\r\n        }\r\n    }\r\n}\r\n// .cardstyle{\r\n//     position: absolute;\r\n//     width: 120px;\r\n//     height: 180px;\r\n//     border: 1px solid rgba(0, 0, 0, 0.3);\r\n//     top: 10px;\r\n//     left: 0px;\r\n//     transition: 0.1s;\r\n//     border-radius: 5px;\r\n//     // background-color: rgba(195, 255, 126, 0.5);\r\n//     cursor: pointer;\r\n//     background-size: cover;\r\n//     background-position: 50% 50%;\r\n//     background-repeat: no-repeat;\r\n// }\r\n// .cardstyle:hover{\r\n//     top: 0px;\r\n// }\r\n.cardbackgroundstyle{\r\n    border-radius: 5px;\r\n}\r\n// .playing_order{\r\n//     // width: 20px;\r\n//     // height: 20px;\r\n//     font-size: 20px;\r\n//     // color: rgb(0, 0, 0);\r\n//     font-family: Hywb;\r\n// }\r\n.cardmsgstyle{\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 60%;\r\n    bottom: 0%;\r\n    border-color: wheat;\r\n}\r\n.outcardstyle{\r\n    position: absolute;\r\n    width: 120px;\r\n    height: 40px;\r\n    // border: 1px solid white;\r\n    right: 25%;\r\n    bottom: 21%;\r\n    color: white;\r\n    cursor: pointer;\r\n    font-family: Hywb;\r\n    font-size: 30px;\r\n    border: 1px solid white;\r\n    border-radius: 5px;\r\n    line-height: 40px;\r\n    transition: 0.1s;\r\n}\r\n.outcardstyle:active{\r\n    background-color: rgba(240, 255, 240, 0.3);\r\n}\r\n.outcardstyle:hover{\r\n    // transform: scale(1.08,1.08);\r\n    bottom: calc(21% + 4px);\r\n}\r\n.incardstyle{\r\n    position: absolute;\r\n    width: 120px;\r\n    height: 40px;\r\n    // border: 1px solid white;\r\n    right: 25%;\r\n    bottom: 28%;\r\n    color: white;\r\n    cursor: pointer;\r\n    font-family: Hywb;\r\n    font-size: 30px;\r\n    border: 1px solid white;\r\n    border-radius: 5px;\r\n    line-height: 40px;\r\n    transition: 0.1s;\r\n}\r\n.incardstyle:active{\r\n    background-color: rgba(240, 255, 240, 0.3);\r\n}\r\n.incardstyle:hover{\r\n    // transform: scale(1.08,1.08);\r\n    bottom: calc(28% + 4px);\r\n}\r\n.playerstatustyle{\r\n    position: absolute;\r\n    width: 50%;\r\n    height: 50px;\r\n    // border: 1px solid white;\r\n    bottom: 21%;\r\n    left: 25%;\r\n}\r\n.playerstatusitemtyle{\r\n    width: 50px;\r\n    height: 50px;\r\n    position: absolute;\r\n    transition: 0.2s;\r\n    // cursor: pointer;\r\n    background-size: cover;\r\n    background-position: 50% 50%;\r\n    background-repeat: no-repeat;\r\n    border-radius: 50px;\r\n}\r\n// .playerstatusitemtyle:hover{\r\n//     // transform: scale(1.5,1.5);\r\n//     box-shadow: 0px 0px 2px 2px white;\r\n// }\r\n.monsterstatustyle{\r\n    width: 50px;\r\n    height: 500px;\r\n    // border: 1px solid white;\r\n    position: absolute;\r\n    left: calc(50% + 290px);\r\n    top: 9%;\r\n}\r\n.messagestyle{\r\n    position: absolute;\r\n    width: 21%;\r\n    height: 30%;\r\n    left: 2%;\r\n    bottom: calc(1% + 10px);\r\n    // border: 1px solid white;\r\n    overflow-y: auto;\r\n    .msgitemstyle{\r\n        color: rgb(255, 255, 255);\r\n        font-size: 20px;\r\n        text-align: left;\r\n        font-family: \"幼圆\", Courier, monospace;\r\n        margin: 0 auto;\r\n    }\r\n}\r\n.messagestyle::-webkit-scrollbar{\r\n    width: 10px;\r\n    height: 8px;\r\n}\r\n.messagestyle::-webkit-scrollbar-button{\r\n    display: none;\r\n}\r\n.messagestyle::-webkit-scrollbar-thumb{\r\n    background-color: rgba(240, 255, 240, 0.5);\r\n    border-radius: 10px;\r\n}\r\n.messagestyle::-webkit-scrollbar-track-piece{\r\n    background-color: rgba(240, 255, 240, 0.2);\r\n    border-radius: 10px;\r\n}\r\n// .fo1style{\r\n//     background-color: #ffffffbe;\r\n//     font-family: \"幼圆\", Courier, monospace;\r\n// }\r\n// .cardeffectstyle{\r\n//     width: 80%;\r\n//     height: 70%;\r\n//     margin-top: 50%;\r\n//     margin-left: 10%;\r\n// }\r\n.playerstyle{\r\n    position: absolute;\r\n    width: 21%;\r\n    height: 20%;\r\n    right: 2%;\r\n    bottom: calc(1% + 10px);\r\n    // border: 1px solid white;\r\n}\r\n.playerhp{\r\n    width: 80%;\r\n    height: 10px;\r\n    margin-left: 10%;\r\n    border: 1px solid #c4d1df;\r\n    border-radius: 5px;\r\n    background-color: rgba(255, 0, 0, 0.5);\r\n}\r\n.playermp{\r\n    width: 80%;\r\n    height: 10px;\r\n    margin-left: 10%;\r\n    margin-top: 20px;\r\n    border: 1px solid #c4d1df;\r\n    border-radius: 5px;\r\n    background-color: rgba(0, 255, 255, 0.5);\r\n}\r\n.player_hp{\r\n    position: absolute;\r\n    width: 50%;\r\n    height: 10px;\r\n    background-color: rgb(162, 71, 65);\r\n    bottom: 0px;\r\n}\r\n.player_mp{\r\n    position: absolute;\r\n    width: 50%;\r\n    height: 10px;\r\n    background-color: rgba(0, 255, 255, 0.5);\r\n    bottom: 0px;\r\n    right: 0px;\r\n}\r\n.attribute{\r\n    position: absolute;\r\n    top: 10%;\r\n    left: 2%;\r\n    width: 30%;\r\n    height: 50%;\r\n    border: 1px solid white;\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./BattlePicture.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./BattlePicture.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BattlePicture.vue?vue&type=template&id=718f8108&scoped=true&\"\nimport script from \"./BattlePicture.vue?vue&type=script&lang=js&\"\nexport * from \"./BattlePicture.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BattlePicture.vue?vue&type=style&index=0&id=718f8108&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"718f8108\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <div class=\"view-style\" :style=\"`background-image:url(${require('@/assets/image/main_back/home_image_2_a.png')})`\">\r\n        <div class=\"a\">\r\n            <table class=\"b\">\r\n                <tbody>\r\n                    <tr v-for=\"item in 3\" :key=\"item\">\r\n                        <td @click=\"showDeck($event,item==1?itemt:item==2?10+itemt:20+itemt)\" \r\n                            class=\"c\" \r\n                            :style=\"`border-radius: 10px;${list[item==1?itemt-1:item==2?10+itemt-1:20+itemt-1]==0?'':'background-image:url('+require('@/assets/image/card/card_7_a.webp')+'),url('+require('@/assets/image/deck_back/deck_back_4_a.png')+')'}`\" \r\n                            v-for=\"itemt in 10\" \r\n                            :key=\"itemt\" \r\n                            :id=\"`back${item==1?itemt:item==2?10+itemt:20+itemt}`\"\r\n                            :data-item=\"list[item==1?itemt-1:item==2?10+itemt-1:20+itemt-1]\"></td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <battle-picture class=\"battle_picture\" v-if=\"showBattle\"/>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport * as TweenMax from 'gsap/all'\r\nimport BattlePicture from '../../components/BattlePicture.vue'\r\nimport _ from 'lodash'\r\n\r\n// var XLSX = require('xlsx')\r\nexport default {\r\n  components: { BattlePicture },\r\n    name:'CombatMain',\r\n    data(){\r\n        return{\r\n            list:[],\r\n            audio:null,\r\n            showBattle:false,\r\n            cardshow:false,\r\n            monsterMain:[],\r\n        }\r\n    },\r\n    mounted(){\r\n        // this.init()\r\n        this.getMonsterData()\r\n        document.documentElement.requestFullscreen()\r\n        // var sheets = store.state.dbsql.sql\r\n        // var obj = XLSX.utils.sheet_to_json(sheets['PeopleDeck'])\r\n        // console.log(XLSX.utils.sheet_to_json(this.$store.state.dbsql.sql['Type_A']));\r\n    },\r\n    methods:{\r\n        routerEvent(e){\r\n            this.$router.push({name:e})\r\n        },\r\n        async init(){\r\n            var that = this,\r\n                num = 0,\r\n                list = [];\r\n            for (let i = 1; i <= 30; i++) { //循环30个事件栏位，初始化栏位\r\n                await random_monster(i)\r\n            }\r\n\r\n            function random_monster(i){\r\n                return new Promise((resolve,reject)=>{\r\n                    if(i <= 10){\r\n                        //顶上10个栏位的随机事件\r\n                        if(Math.round(Math.random()) == 1){\r\n                            list.push(that.monsterMain[num])\r\n                            num++\r\n                        }else{\r\n                            list.push(0)\r\n                        }\r\n                    }else if(i > 10 && i < 21){ //对中间10个栏位进行条件判断\r\n                        if(list.indexOf(i-10) == -1){\r\n                            //如果检测到与其对应的上方栏位没有放置事件，则该栏位必然产生一个事件\r\n                            list.push(that.monsterMain[num])\r\n                            num++\r\n                        }else{\r\n                            //如果检测到与其对应的上方栏位已经放置事件，则该栏位随机放置事件\r\n                            if(Math.round(Math.random()) == 1){\r\n                                list.push(that.monsterMain[num])\r\n                                num++\r\n                            }else{\r\n                                list.push(0)\r\n                            }\r\n                        }\r\n                    }else if(i > 20){ //对底下10个栏位进行条件判断\r\n                        if(list.indexOf(i-10) == -1){\r\n                            //如果检测到与其对应的上方栏位没有放置事件，则该栏位必然产生一个事件\r\n                            list.push(that.monsterMain[num])\r\n                            num++\r\n                        }else if(list.indexOf(i-10) !== -1 && list.indexOf(i-20) !== -1){\r\n                            //如果检测到与其对应的上方所有栏位已经放置事件，则该栏位随机放置事件\r\n                            if(Math.round(Math.random()) == 1){\r\n                                list.push(that.monsterMain[num])\r\n                                num++\r\n                            }else{\r\n                                list.push(0)\r\n                            }\r\n                        }else if(list.indexOf(i-10) !== -1 && list.indexOf(i-20) == -1){\r\n                            list.push(that.monsterMain[num])\r\n                            num++\r\n                        }\r\n                    }\r\n                    resolve()\r\n                })\r\n            }\r\n            that.list = _.cloneDeep(list)\r\n        },\r\n        // 开局时制作当前副本对应怪物卡池\r\n        async getMonsterData(e){\r\n            var lva = [],\r\n                lvb = [],\r\n                lvc = [];\r\n            await this.$axios.get('/GemEnum.xlsx',{responseType:'arraybuffer'}).then((res)=>{\r\n                const XLSX = require('xlsx')\r\n                var data = new Uint8Array(res.data),\r\n                    wb = XLSX.read(data, {type:\"array\"}),\r\n                    sheets = wb.Sheets,\r\n                    monsterMain = XLSX.utils.sheet_to_json(sheets.Type_A), // 怪物主体\r\n                    monsterSkill = XLSX.utils.sheet_to_json(sheets.Type_A_Skill), // 怪物技能\r\n                    skill = XLSX.utils.sheet_to_json(sheets.Skill_Type); // 技能效果\r\n\r\n                monsterMain.forEach((item,index)=>{\r\n                    item.skill = _.compact(item.skill_id.split(\",\")).map((e)=>{\r\n                        return _.find(monsterSkill,(o)=>{\r\n                            return o.id == Number(e)\r\n                        })\r\n                    }).map((e)=>{\r\n                        return e.skillEffect = _.compact(e.skill_type.split(\",\")).map((e)=>{\r\n                            return _.find(skill,(o)=>{\r\n                                return o.id == Number(e)\r\n                            })\r\n                        })\r\n                    })\r\n                    switch (item.life_level) {\r\n                        case \"普通怪物\":\r\n                            lva.push(item)\r\n                            break;\r\n                        case \"精英怪物\":\r\n                            lvb.push(item)\r\n                            break;\r\n                        case \"领主怪物\":\r\n                            lvc.push(item)\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                })\r\n            })\r\n            this.monsterMain = _.shuffle([..._.sampleSize(lva,10),..._.sampleSize(lvb,10),..._.sampleSize(lvc,10)])\r\n\r\n            this.init()\r\n        },\r\n        showDeck(e,item){\r\n            if(this.cardshow == false){\r\n                this.cardshow = true\r\n                TweenMax.gsap.to(`#back${item}`,0.5,{backgroundPosition:'-200% 50%,50% 50%',onComplete:()=>{this.showBattle = true}})\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.view-style{\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n.a{\r\n    position: absolute;\r\n    z-index: 1;\r\n    width: 90%;\r\n    height: 80%;\r\n    // border: 1px solid black;\r\n    top: 10%;\r\n    left: 5%;\r\n}\r\n.b{\r\n    width: 100%;\r\n    height: 100%;\r\n    margin: 0 auto;\r\n    // border: 1px solid black;\r\n    border-spacing:10px;\r\n}\r\n.c{\r\n    cursor: pointer;\r\n    background-size: cover;\r\n    background-position: 50% 50%;\r\n    background-repeat: no-repeat;\r\n}\r\n.c:hover{\r\n    box-shadow: 0 2px 2px rgba(0, 0, 0, 0.30);\r\n}\r\n.battle_picture{\r\n    width: 100%;\r\n    height: 100%;\r\n    position: absolute;\r\n    z-index: 2;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CombatMain.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CombatMain.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CombatMain.vue?vue&type=template&id=5a9080be&scoped=true&\"\nimport script from \"./CombatMain.vue?vue&type=script&lang=js&\"\nexport * from \"./CombatMain.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CombatMain.vue?vue&type=style&index=0&id=5a9080be&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5a9080be\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","style","_l","item","key","itemt","list","attrs","on","$event","showDeck","_e","staticRenderFns","_v","_s","monsterinfo","monster_name","hp","current_hp","staticStyle","index","statusmouseenterevent","statusmouseleaveevent","incard","outcard","domProps","BasicsCard","msg","FDamageValue","FTitle","value","async","judgment_start_current","container","document","getElementsByClassName","card","getElementById","id","TweenMax","zIndex","left","offsetWidth","clientWidth","top","FType","cardeffect","data","msglist","message","player_statuslist","titlecolor","name","image","monster_statuslist","start_end","cardid","watch","nval","current_hp2","setTimeout","current_hp1","beforeMount","mounted","transform","width","methods","init","common","battle","delay","opacity","onComplete","components","updatecardmargin","component","BattlePicture","audio","showBattle","cardshow","monsterMain","routerEvent","num","resolve","that","lvb","lvc","responseType","wb","type","sheets","monsterSkill","skill","map","e","lva","backgroundPosition"],"sourceRoot":""}