"use strict";(self["webpackChunkgamea"]=self["webpackChunkgamea"]||[]).push([[932],{8932:function(t,e,s){s.r(e),s.d(e,{default:function(){return E}});var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"view-style",style:"background-image:url("+s(7346)+")"},[a("div",{staticClass:"a"},[a("table",{staticClass:"b"},[a("tbody",t._l(3,(function(e){return a("tr",{key:e},t._l(10,(function(i){return a("td",{key:i,staticClass:"c",style:"border-radius: 10px;"+(0==t.list[1==e?i-1:2==e?10+i-1:20+i-1]?"":"background-image:url("+s(1940)+"),url("+s(6523)+")"),attrs:{id:"back"+(1==e?i:2==e?10+i:20+i),"data-item":t.list[1==e?i-1:2==e?10+i-1:20+i-1]},on:{click:function(s){return t.showDeck(s,1==e?i:2==e?10+i:20+i)}}})})),0)})),0)])]),t.showBattle?a("battle-picture",{staticClass:"battle_picture"}):t._e()],1)},i=[],n=(s(8675),s(3462),s(7999)),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"curtainstyle",attrs:{id:"curtainstyle"}},[a("div",{staticClass:"attribute"}),a("div",{staticClass:"monster_blood_volume"},[a("div",{staticClass:"monster_blood_volume_1",attrs:{id:"monster_blood_volume_1"}}),a("div",{staticClass:"monster_blood_volume_2",attrs:{id:"monster_blood_volume_2"}}),a("div",{staticClass:"monster_blood_volume_3"},[t._v(t._s(t.monsterinfo.monster_name)+"·"+t._s(t.monsterinfo.hp)+"|"+t._s(t.monsterinfo.current_hp))]),a("i",{staticClass:"icon-HP1",staticStyle:{position:"absolute","z-index":"3","font-size":"80px",top:"-86%",width:"100%","text-align":"center",left:"calc(50% - 400px)",color:"#d7c1a0"}}),a("i",{staticClass:"icon-HPL",staticStyle:{position:"absolute","z-index":"3","font-size":"40px",height:"100%","line-height":"30px",left:"-3.5%",color:"#d7c1a0"}}),a("i",{staticClass:"icon-HPR",staticStyle:{position:"absolute","z-index":"3","font-size":"40px",height:"100%","line-height":"30px",right:"-3.5%",color:"#d7c1a0"}})]),a("div",{staticClass:"curtainstyle_1",style:"background-image:url("+s(2906)+"),url("+s(6335)+")",attrs:{id:"curtainstyle_1"}}),a("div",{staticClass:"monsterstatustyle"},t._l(t.monster_statuslist,(function(t,e){return a("div",{key:e,staticClass:"playerstatusitemtyle",style:"background-image:url("+t.image+")",attrs:{id:"monster_status"+e}})})),0),a("div",{staticClass:"playerstatustyle"},t._l(t.player_statuslist,(function(e,s){return a("div",{key:s,staticClass:"playerstatusitemtyle",style:"background-image:url("+e.image+")",attrs:{id:"player_status"+s},on:{mouseenter:function(s){return t.statusmouseenterevent(s,e)},mouseleave:function(s){return t.statusmouseleaveevent(s,e)}}})})),0),a("div",{staticClass:"curtainstyle_2",attrs:{id:"cartridge_clip"}}),a("div",{staticClass:"incardstyle",on:{click:t.incard}},[t._v("抽 牌")]),a("div",{staticClass:"outcardstyle",on:{click:t.outcard}},[t._v("出 牌")]),a("div",{staticClass:"messagestyle"},t._l(t.msglist,(function(e,s){return a("p",{key:s,staticClass:"msgitemstyle",domProps:{innerHTML:t._s(e)}})})),0),a("div",{staticClass:"player_hp"}),a("div",{staticClass:"player_mp"})])},r=[];function o(t,e){return{msg:`您对<span style="color:#c000ffd1;font-size:25px;font-family:Hywb"> ${e} </span>造成<span style="color:red"> ${t.FDamageValue} </span>点${t.FTitle}伤害!`,value:t.FDamageValue}}var c={BasicsCard:o};async function d(t,e){var s=document.getElementsByClassName("curtainstyle_2")[0],a=document.getElementById(t.id);switch(await n.p8.to(`#${t.id}`,.2,{zIndex:44,left:s.offsetWidth/2-a.clientWidth/2,top:"-230%"}),t.FType){case"基础卡":return c.BasicsCard(t,e);default:break}}var u={judgment_start_current:d},m=s(4806),h=s.n(m),p=s(2514),_=s(6955),y={data(){return{monsterinfo:{monster_name:"羽蛇神",hp:1e6,current_hp:1e6},msglist:[],message:"",player_statuslist:[{titlecolor:"#C60000",name:"超新星爆炸",image:s(7540)},{titlecolor:"#6600C6",name:"玄冥星系",image:s(5966)},{titlecolor:"#3EA300",name:"万物天生",image:s(2027)}],monster_statuslist:[{titlecolor:"#C60000",name:"超新星爆炸",image:s(7540)},{titlecolor:"#6600C6",name:"玄冥星系",image:s(5966)},{titlecolor:"#3EA300",name:"万物天生",image:s(2027)}],start_end:!1,cardid:null}},watch:{player_statuslist(t,e){t.forEach(((t,e)=>{this.$nextTick((()=>{e>0&&(document.getElementById(`player_status${e}`).style.left=60*e+"px")}))}))},msglist(t,e){this.$nextTick((()=>{document.getElementsByClassName("messagestyle")[0].scrollTop=document.getElementsByClassName("messagestyle")[0].scrollHeight}))},"monsterinfo.current_hp"(t,e){var s=document.getElementsByClassName("monster_blood_volume_1")[0],a=document.getElementsByClassName("monster_blood_volume_2")[0];a.style.width=t/this.monsterinfo.hp*100+"%",setTimeout((()=>{s.style.width=t/this.monsterinfo.hp*100+"%"}),200),this.$nextTick((()=>{this.msglist.push(this.message)}))}},beforeMount(){this.init()},mounted(){this.player_statuslist.forEach(((t,e)=>{this.$nextTick((()=>{e>0&&(document.getElementById(`player_status${e}`).style.left=60*e+"px")}))})),this.monster_statuslist.forEach(((t,e)=>{this.$nextTick((()=>{e>0&&(document.getElementById(`monster_status${e}`).style.top=60*e+"px")}))})),this.$nextTick((()=>{n.p8.to("#curtainstyle_1",1,{transform:"scale(1,1)"}),n.p8.to(["#monster_blood_volume_1","#monster_blood_volume_2","#monster_blood_volume_5","#monster_blood_volume_6"],1,{width:"100%"})}))},methods:{init(){_.ZP.create_card(0,[]).then((async t=>{0==t.length?this.init():(await t.forEach(((t,e)=>{document.getElementById("cartridge_clip").appendChild(t)})),this.updatecardmargin(t),this.$nextTick((()=>{})))}))},outcard(){if(1==this.$store.state.player.start_end)return!1;this.$store.dispatch("Start_End",!0),this.cardid=this.$store.state.player.cardid,u.judgment_start_current(this.cardid,this.monsterinfo.monster_name).then((async t=>{this.monsterinfo.current_hp-=t.value,this.message=t.msg,await n.p8.to(`#${this.cardid.id}`,.2,{delay:.6,opacity:0,onComplete:()=>{var t=document.getElementById(this.cardid.id);t.parentElement.removeChild(t),this.cardid=null,this.$store.dispatch("Cardid",{})}});var e=[];for(let s=0;s<document.getElementById("cartridge_clip").children.length;s++)e.push(document.getElementById("cartridge_clip").children[s]);this.updatecardmargin(e)}))},incard(){_.ZP.create_card(1,[]).then((async t=>{if(0==t.length)this.incard();else{await t.forEach(((t,e)=>{document.getElementById("cartridge_clip").appendChild(t)}));var e=[];for(let t=0;t<document.getElementById("cartridge_clip").children.length;t++)e.push(document.getElementById("cartridge_clip").children[t]);this.updatecardmargin(e)}}))},statusmouseenterevent(t,e){p.ZP.playerstatuinfo(document.getElementById("curtainstyle"),e)},statusmouseleaveevent(t,e){p.ZP.playerstatuinfo(document.getElementById("curtainstyle"),e)},updatecardmargin(t){if(t.length<=7)t.forEach(((t,e)=>{this.$nextTick((()=>{document.getElementById(t.id).style.left=140*e+"px"}))}));else{var e=document.getElementsByClassName("curtainstyle_2")[0].offsetWidth,s=8==t.length?0:(120*t.length-e)/(t.length-1);t.forEach(((t,e)=>{this.$nextTick((()=>{document.getElementById(t.id).style.left=(120-s)*e+"px"}))}))}this.$store.dispatch("Start_End",!1)}}},g=y,f=s(1001),v=(0,f.Z)(g,l,r,!1,null,"718f8108",null),C=v.exports,b={components:{BattlePicture:C},name:"CombatMain",data(){return{list:[],audio:null,showBattle:!1,cardshow:!1,monsterMain:[]}},mounted(){this.getMonsterData(),document.documentElement.requestFullscreen()},methods:{routerEvent(t){this.$router.push({name:t})},async init(){var t=this,e=0,s=[];for(let i=1;i<=30;i++)await a(i);function a(a){return new Promise(((i,n)=>{a<=10?1==Math.round(Math.random())?(s.push(t.monsterMain[e]),e++):s.push(0):a>10&&a<21?-1==s.indexOf(a-10)||1==Math.round(Math.random())?(s.push(t.monsterMain[e]),e++):s.push(0):a>20&&(-1==s.indexOf(a-10)?(s.push(t.monsterMain[e]),e++):-1!==s.indexOf(a-10)&&-1!==s.indexOf(a-20)?1==Math.round(Math.random())?(s.push(t.monsterMain[e]),e++):s.push(0):-1!==s.indexOf(a-10)&&-1==s.indexOf(a-20)&&(s.push(t.monsterMain[e]),e++)),i()}))}t.list=h().cloneDeep(s)},async getMonsterData(t){var e=[],a=[],i=[];await this.$axios.get("/GemEnum.xlsx",{responseType:"arraybuffer"}).then((t=>{const n=s(7092);var l=new Uint8Array(t.data),r=n.read(l,{type:"array"}),o=r.Sheets,c=n.utils.sheet_to_json(o.Type_A),d=n.utils.sheet_to_json(o.Type_A_Skill),u=n.utils.sheet_to_json(o.Skill_Type);c.forEach(((t,s)=>{switch(t.skill=h().compact(t.skill_id.split(",")).map((t=>h().find(d,(e=>e.id==Number(t))))).map((t=>t.skillEffect=h().compact(t.skill_type.split(",")).map((t=>h().find(u,(e=>e.id==Number(t))))))),t.life_level){case"普通怪物":e.push(t);break;case"精英怪物":a.push(t);break;case"领主怪物":i.push(t);break;default:break}}))})),this.monsterMain=h().shuffle([...h().sampleSize(e,10),...h().sampleSize(a,10),...h().sampleSize(i,10)]),this.init()},showDeck(t,e){0==this.cardshow&&(this.cardshow=!0,n.p8.to(`#back${e}`,.5,{backgroundPosition:"-200% 50%,50% 50%",onComplete:()=>{this.showBattle=!0}}))}}},x=b,k=(0,f.Z)(x,a,i,!1,null,"5a9080be",null),E=k.exports},2906:function(t,e,s){t.exports=s.p+"assets/img/2-ai.29c657f3.svg"},1940:function(t,e,s){t.exports=s.p+"assets/img/card_7_a.573af639.webp"},6335:function(t,e,s){t.exports=s.p+"assets/img/monster1.989ace07.png"},7540:function(t,e,s){t.exports=s.p+"assets/img/status1.5dfc9214.png"},5966:function(t,e,s){t.exports=s.p+"assets/img/status2.99c4e072.png"},2027:function(t,e,s){t.exports=s.p+"assets/img/status3.ae7abf27.png"}}]);
//# sourceMappingURL=932.0f26cfab.js.map